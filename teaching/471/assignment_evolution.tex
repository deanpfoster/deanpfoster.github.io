\documentclass[11pt]{article}
\usepackage{hyperref}
\usepackage{enumerate}

\begin{document}
\section*{Assignment 4: Darwin and Global Warming}

% (\href{assignment4.pdf}{pdf version})  the html is unreadable

\begin{enumerate}

\item This problem will have you do an analysis similar to the one Adi
did for global warming, but instead using stock data.  We will first
have to download the data.  

Here is your mission:
\begin{enumerate}[step 1:]
\item Log onto
\href{http://wrds.wharton.upenn.edu/}{http://wrds.wharton.upenn.edu/},
the Wharton data server.
\item Go to the CRSP section. (This is data from Chicago).
\item Read the blurb, but don't get too distracted.  We want the menu
on the left here.  So pick the induces and deciles link.
\item Now follow the monthly link to the actual data manufacturing page
\item Grab data starting from 1925, grab all 10 deciles.  Tic the box
to generate both returns and values.  Grab the
value weighted return (with dividends).  Also grab the SP500 returns.
Finally tell it to generate a csv file.
\item submit your request and you are off and running.  It should read
easily into JMP or R.
\item But while you are here, switch to the ``Treasury and inflation''
menu and save some 30 day t-bills and inflation.
\item Now merge these two data set together.  Check that the dates line up.
\item Now correct each of the 10 deciles to reflect the 30day tbill.
(I.e. create 10 new columns for which you have subtracted out the tbill.)
\end{enumerate}
Now that you have your data in a file, let's start analysing it.  (If
you have problems with the above steps, send me an email and I can
either provide you with help, or the actual data file.)
\begin{enumerate}
\item First confirm that this makes sense.  We know that the top
deciles should look a lot like the SP500 since they are the 500 biggest
stocks.  The question is, are the big stocks in Cap1ret or in
Cap10ret?  So make a plot of both of these vs the SP500 returns.
Which seems to match the SP500 better?  Read the documentation and
confirm these are the big stocks.
\item Now make a scatter plot matrix of all 10 deciles.  They are all
highly correlated.  You can confirm this via brushing.
\item Ask JMP to save the principle components.  First have it do the
correlation based ones.  Look at the formula for a saved column?  Is
this something you could buy?  (I.e. is there a constant term in it?)
Now ask JMP to save principle components via ``on unscaled.''  Look at
these formulas--hopefully they are now something you could buy.
\item You now have 10 principle components that are tradable assets.
Are any of them things you would want to buy?  Look at the means of
each of them and test the hypothesis that their mean is zero.  Which
look significant if any?  (Don't forget to use some sort of correction for
your 10 tests.)
\item The first principle component is what is driving most of the 10
deciles.  So what is it exactly?  To understand it, run a regression
of the 10 deciles (as X's) on this component (be sure to remove the
intercept since we don't want it in the regression).  This will tell
us how much weight each of the deciles correspond to in this principle
component.  What does this component seem to be?  Does this justify it
having a no-trivial return?
\item Make a scatter-plot of your first few principle components.
Brush these components and see how the 10 deciles light up.  
\item Make principle components of the price series rather than the
return series.  How are these different than the ones you generated
above?  
\end{enumerate}

\item The driving model in evolution is the $r,K$-model.\footnote{see
\href{http://en.wikipedia.org/wiki/K-selection}{http://en.wikipedia.org/wiki/K-selection}.}
for an overview.)  Basically the story is that populations grow
exponentially (at rate $r$) until they end up reaching their carrying
capacity ($K$).  So, the population growing curve looks like a
logistic function%
\footnote{see \href{http://en.wikipedia.org/wiki/Logistic_function}{http://en.wikipedia.org/wiki/Logistic\_function}.}

We will fit some data to this model.  Traditionally, one counts the
 number of lizards on a new island every year over a decade or two.
  This is interesting biology and important science, but isn't really
 very interesting when it comes to data analysis.  So we will use a
 more interesting (but less accurately modeled) data set--namely
 AIDS/HIV cases in the USA.

One data series for the number of new cases of AIDS from the AVERT
website%
\footnote{see
\href{http://www.avert.org/usa-statistics.htm}{http://www.avert.org/usa-statistics.htm}.
I couldn't find useful data on the
\href{http://www.cdc.gov/Hiv/topics/surveillance/resources/factsheets/incidence.htm}{cdc}
which is where I would expect the best data to be.}
is the following:
\newpage

\begin{verbatim}
year, newCases 
1981, 500
1982, 1000
1983, 3000
1984, 10000
1985, 18000
1986, 25000
1987, 33000
1988, 40000
1989, 45000
1990, 50000
1991, 80000
1992, 80000
1993, 75000
1994, 70000
1995, 60000
1996, 50000
1997, 42000
1998, 40000
1999, 40000
2000, 40000
2001, 40000
2002, 39000
2003, 39000
2004, 38000
2005, 38000
2006, 38000
\end{verbatim}
\begin{enumerate}
\item We want to fit the function $Y = K/(1+e^{-rt})$ to this series.
Unfortunately, this is not an intrinsicly linear model.%
\footnote{We discussed these in class.  If you forgot what they are, I
found a small discussion here \href{http://pj.freefaculty.org/stat/NonlinearRegression/NonlinearRegression1-1.0.pdf}{http://pj.freefaculty.org/stat/NonlinearRegression/NonlinearRegression1-1.0.pdf}.}
So it is hard to fit this using a regression.  If you are using R, you
can fit this anyway as an optimization problem.  But in JMP, there is
no simple way to do it.  So fit it by ``eye.''  In other words, come
up with a $K$ that you feel matches the maximum growth point, and a
exponential growth parameter that matches the growth rate.  Now plot
this function.  When you have a curve that looks about right, you will
need to identify what year is ``t=0'' to match your data as well as
possible.   So your deliverable here are 4 things:
\begin{itemize}
\item $K$
\item $r$
\item Year for $t=0$.
\item Plot of your fit overlaying the plot of the data.
\end{itemize}
So for example, if you claim time starting in 1955 is a good place,
and the maximum value is 100,000 and it grows by 50\% every year, then you
are fitting the model $Y = 100000/(1+e^{-.5(t-1955)}$ to your data.
\item The actual growth model claims that $dY/dt = rY(1 - Y/K)$.  We
can actually fit this model instead.  To do it, create a difference of
our $Y$'s.  This will be our ``$dY/dt$'' piece of our model.  Now use
as variables $Y$ and $Y^2$.  We can now fit $diff(Y) = \alpha + \beta
Y + \gamma Y^2$.  We have now made our model intrinsically linear.  In
other words, we can fit it by a regression now.  
\begin{enumerate}
\item Fit this model.  Work out what $r$ and $K$ are from your fit to
the model.  The true model doesn't have an $\alpha$ in it.  So does the
$\alpha$ appear to be zero?
\item You can actually force JMP (and also R) to leave off the
constant term.  Tick the box saying ``no constant'' in the regression
and rerun the model.  Does this change your estimates of $r$ and $K$?
Can you explain why this happens?
\item Plot the resulting growth curve that this model corresponds to.
Do you like it better or worse than the curve you came up with by
fitting it by eye?
\item (discussion question, say 2 paragraphs total) Are the $r$ and
 $K$ that you came up with above reasonable?  Does this model make
 biological sense?  Do they match The fit generated by the some other
 researchers?
  (\href{http://www.nlreg.com/aids.htm}{http://www.nlreg.com/aids.htm})
\end{enumerate}
\end{enumerate}

\end{enumerate}

\end{document}
